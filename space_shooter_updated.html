<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Space Shooter - Game By Karuna</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(180deg, #0a0a2e 0%, #16213e 50%, #1a1a3e 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      font-family: 'Courier New', monospace;
      overflow: hidden;
    }
    #gameContainer {
      position: relative;
      margin-bottom: 20px;
      border: 2px solid #00ffff;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ffff, inset 0 0 20px rgba(0,255,255,0.2);
      background: black;
    }
    #gameCanvas {
      display: block;
    }
    #ui, #mobileUI, #soundToggle, #chatHistory, #mobileControls, #startScreen, #gameOver {
      position: absolute;
      z-index: 10;
    }
    #soundToggle {
      top: 10px; right: 10px;
      background: rgba(0,255,255,0.2);
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    #chatHistory {
      bottom: 10px; right: 10px;
      background: rgba(0,0,0,0.7);
      padding: 5px 8px;
      border-radius: 6px;
    }
    #chatHistory a { color: #00ffff; text-decoration: none; }
    #mobileControls {
      bottom: 20px; left: 0; right: 0;
      display: flex; justify-content: space-between;
      padding: 0 20px;
    }
    .mobile-btn {
      width: 70px; height: 70px;
      border: 2px solid #00ffff;
      border-radius: 12px;
      background: rgba(0,255,255,0.2);
      font-size: 28px;
      color: #00ffff;
      display: flex; align-items: center; justify-content: center;
      user-select: none;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <canvas id="gameCanvas"></canvas>
    <div id="soundToggle">üîä</div>
    <div id="chatHistory"><a href="https://claude.ai/share/b45f9845-b341-42f0-8721-fedcdf39d494" target="_blank">Chat History</a></div>
    <div id="startScreen">
      <h2 style="color:#00ffff;">Space Shooter</h2>
      <p>Press Start</p>
      <button onclick="startGame()">Start</button>
    </div>
    <div id="gameOver" style="display:none; color:#ff4444;">
      <h2>Game Over</h2>
      <p>Final Score: <span id="finalScore">0</span></p>
      <button onclick="restartGame()">Restart</button>
    </div>
    <div id="ui" style="top:10px; left:10px; color:#00ffff;">
      <div>Score: <span id="score">0</span></div>
      <div>High: <span id="highScore">0</span></div>
      <div>Lives: <span id="lives">5</span></div>
    </div>
  </div>

  <div id="mobileControls">
    <button class="mobile-btn" id="leftBtn">‚Üê</button>
    <button class="mobile-btn" id="rightBtn">‚Üí</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const canvasBaseWidth = 800;
    const canvasBaseHeight = 600;
    let scaleX = 1, scaleY = 1;

    function resizeCanvas() {
      const maxWidth = window.innerWidth * 0.95;
      const maxHeight = window.innerHeight * 0.7;
      const aspect = canvasBaseWidth / canvasBaseHeight;
      let newWidth = maxWidth;
      let newHeight = newWidth / aspect;
      if (newHeight > maxHeight) {
        newHeight = maxHeight;
        newWidth = newHeight * aspect;
      }
      canvas.style.width = newWidth + "px";
      canvas.style.height = newHeight + "px";
      canvas.width = canvasBaseWidth;
      canvas.height = canvasBaseHeight;
      scaleX = newWidth / canvasBaseWidth;
      scaleY = newHeight / canvasBaseHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    // Game variables
    let player = { x: 350, y: 500, w: 100, h: 80, speed: 8 };
    let bullets = [];
    let enemies = [];
    let score = 0;
    let lives = 5;
    let gameRunning = false;
    let highScore = parseInt(localStorage.getItem("spaceShooterHighScore")) || 0;

    // Controls
    let keys = {};
    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);
    document.getElementById("leftBtn").addEventListener("touchstart", ()=>keys["ArrowLeft"]=true);
    document.getElementById("leftBtn").addEventListener("touchend", ()=>keys["ArrowLeft"]=false);
    document.getElementById("rightBtn").addEventListener("touchstart", ()=>keys["ArrowRight"]=true);
    document.getElementById("rightBtn").addEventListener("touchend", ()=>keys["ArrowRight"]=false);

    // Sounds
    let soundEnabled = true;
    const sounds = {
      hit: new Audio("assets/enemyhit.wav"),
      over: new Audio("assets/gameover.wav"),
      bg: new Audio("assets/backgroundsound.mp3")
    };
    sounds.bg.loop = true; sounds.bg.volume = 0.3;
    document.getElementById("soundToggle").onclick = ()=> {
      soundEnabled=!soundEnabled;
      if(soundEnabled){document.getElementById("soundToggle").textContent="üîä"; sounds.bg.play();}
      else {document.getElementById("soundToggle").textContent="üîá"; sounds.bg.pause();}
    };

    function playSound(s){ if(soundEnabled){ sounds[s].currentTime=0; sounds[s].play(); } }

    function startGame(){
      score=0; lives=5; bullets=[]; enemies=[];
      gameRunning=true;
      document.getElementById("startScreen").style.display="none";
      document.getElementById("gameOver").style.display="none";
      sounds.bg.play();
    }

    function restartGame(){ startGame(); }

    // Game loop
    let frame=0;
    function loop(){
      ctx.clearRect(0,0,canvasBaseWidth,canvasBaseHeight);
      ctx.fillStyle="black"; ctx.fillRect(0,0,canvasBaseWidth,canvasBaseHeight);

      if(gameRunning){
        // Player move
        if(keys["ArrowLeft"] && player.x>0) player.x-=player.speed;
        if(keys["ArrowRight"] && player.x<canvasBaseWidth-player.w) player.x+=player.speed;
        // Draw player
        ctx.fillStyle="#00ffff";
        ctx.fillRect(player.x,player.y,player.w,player.h);

        // Auto shoot
        if(frame%10===0) bullets.push({x:player.x+player.w/2-5,y:player.y-10,w:10,h:20,s:10});
        bullets.forEach((b,i)=>{ b.y-=b.s; ctx.fillStyle="yellow"; ctx.fillRect(b.x,b.y,b.w,b.h); if(b.y<-20)bullets.splice(i,1);});

        // Spawn enemies
        if(frame%60===0) enemies.push({x:Math.random()*(canvasBaseWidth-50),y:-40,w:50,h:40,s:2});
        enemies.forEach((en,j)=>{
          en.y+=en.s; ctx.fillStyle="red"; ctx.fillRect(en.x,en.y,en.w,en.h);
          if(en.y>canvasBaseHeight){ enemies.splice(j,1); loseLife(); }
        });

        // Collisions
        bullets.forEach((b,i)=>{
          enemies.forEach((en,j)=>{
            if(b.x<b.en+en.w && b.x+b.w>en.x && b.y<en.y+en.h && b.y+b.h>en.y){
              bullets.splice(i,1); enemies.splice(j,1);
              score+=10; playSound("hit");
            }
          });
        });
        enemies.forEach((en,j)=>{
          if(en.x<player.x+player.w && en.x+en.w>player.x && en.y<player.y+player.h && en.y+en.h>player.y){
            enemies.splice(j,1); loseLife();
          }
        });

        document.getElementById("score").textContent=score;
        document.getElementById("highScore").textContent=highScore;
        document.getElementById("lives").textContent=lives;
      }
      frame++;
      requestAnimationFrame(loop);
    }

    function loseLife(){
      lives--; if(lives<=0){ endGame(); }
    }

    function endGame(){
      gameRunning=false;
      sounds.bg.pause(); playSound("over");
      if(score>highScore){ highScore=score; localStorage.setItem("spaceShooterHighScore",highScore); }
      document.getElementById("finalScore").textContent=score;
      document.getElementById("gameOver").style.display="block";
    }

    loop();
  </script>
</body>
</html>
